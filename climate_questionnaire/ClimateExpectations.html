{{ block styles }}
<style>
    input[type=number] {
        width: 80px;
        text-align: center;
    }
</style>
{{ endblock }}

{{ block title }}
{{ endblock }}

{{ block content }}

<div class="form-control mb-1">
    {{ formfield "climate_threat" label=fields_labels.climate_threat }}
</div>

<div class="form-control mb-3">
    <p>
        {{ if en }}
        If nothing is done to limit climate change, how likely do you think it is that climate change will lead to the
        following events?
        {{ elif fr }}
        Si rien n'est fait pour limiter le changement climatique, selon vous, quelle est la probabilité que le
        changement climatique entraîne les événements suivants ?
        {{ elif vi }}
        Nếu không có biện pháp nào được thực hiện để hạn chế biến đổi khí hậu, theo bạn biến đổi khí hậu có khả năng dẫn đến những sự kiện sau đây ở mức độ nào?
        {{ endif }}
    </p>
    <table class="table table-sm">
        <thead>
        <tr>
            <th></th>
            <th>
                {{ if en }} Very unlikely {{ elif fr }} Très improbable {{ elif vi }} Rất ít {{ endif }}
            </th>
            <th>{{ if en }} Somewhat unlikely {{ elif fr }} Improbable {{ elif vi }} Khá ít {{ endif }}</th>
            <th>{{ if en }} Somewhat likely {{ elif fr }} Probable {{ elif vi }} Khá có {{ endif }}</th>
            <th>{{ if en }} Very likely {{ elif fr }} Très probable {{ elif vi }} Rất có {{ endif }}</th>
        </tr>
        </thead>
        <tbody>
        {{ for field, field_label in fields_labels.items }}
        {{ if field in fields_expectations }}
        <tr>
            <td>{{ field_label|safe }}</td>
            {{ for i in [-2, -1, 1, 2] }}
            <td class="text-center">
                <input type="radio" class="form-check-input" name="{{ field }}" value="{{ i }}" required>
            </td>
            {{ endfor }}
        </tr>
        {{ endif }}
        {{ endfor}}
        </tbody>
    </table>
</div>

{{ if vi }}
<button class="btn btn-primary otree-btn-next">Tiếp tục</button>
{{ else }}
{{ next_button }}
{{ endif }}

{{ endblock }}

{{ block scripts }}
<script src="{{ static 'global/fill_auto.js' }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelector(".otree-btn-next").addEventListener("click", (e) => {
            if (!ckeck_ranks()) {
                e.preventDefault();
            }
        })
        if (js_vars.fill_auto)
            fill_auto();
    });

    function ckeck_ranks() {
        const coal = parseInt(forminputs.rank_coal.value);
        const gas = parseInt(forminputs.rank_gas.value);
        const nuclear = parseInt(forminputs.rank_nuclear.value);

        if (coal === gas || coal === nuclear || gas === nuclear) {
            document.querySelector(".form-control-errors").style.display = "block";
            setTimeout(() => {
                document.querySelector(".form-control-errors").style.display = "none";
            }, 2000)
            return false;
        }
        return true;
    }
</script>
{{ endblock }}
